<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Continuous integration is an awesome idea that doesn't work and can't work because of its natural conflict with business and technical objectives." /> <meta name="keywords" content="" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Continuous Integration is Dead"/> <meta name="twitter:description" property="og:description" content="Continuous integration is an awesome idea that doesn't work and can't work because of its natural conflict with business and technical objectives."/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/zh/2014/10/08/continuous-integration-is-dead.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?53ed866f052"/> <link rel="apple-touch-icon" href="/favicon.ico?53ed866f052"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?53ed866f052"/> <link rel="stylesheet" href="/css/icons.css?53ed866f052"/> <link rel="canonical" href="https://www.yegor256.com/zh/2014/10/08/continuous-integration-is-dead.html" /> <title>Continuous Integration is Dead</title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;389</a></li> <li ><a href="/teaching.html" title="My courses and lectures">Teaching</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/research.html" title="My research directions and progress">Research</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Art</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке о политике в России, Украине и мире">Политика</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><h1 itemprop="name headline mainEntityOfPage">Continuous Integration is Dead</h1></header> <article class="main" itemprop="articleBody" style="font-family: sans-serif; font-size: 0.9em; line-height: 1.2em;"><p style="color: #C42C00;">The following text is a <em>partial</em> translation of the <a href='https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html'>original English article</a>, performed by <a href="https://chat.openai.com/">ChatGPT</a> (gpt-3.5-turbo) and <a href="https://github.com/yegor256/jekyll-chatgpt-translate">this Jekyll plugin</a>:</p><p>几天前，我的文章<a href="http://devops.com/blogs/continuous-integration-doesnt-work/">为什么持续集成不起作用</a>在<a href="http://www.devops.com">DevOps.com</a>上发表了。几乎同一天，我在Twitter上收到了几条非常负面的批评。</p><p>下面是我对这个未被问到的问题的回应：</p><blockquote><p>为什么连续集成不应该有效呢？它是一个如此优秀和受欢迎的想法。</p></blockquote><p>虽然我在这个领域有一些经验，但我不会将其作为论据。相反，我将尽力仅依靠逻辑。</p><p>顺便说一下，我的经验包括在50多个开源和商业项目中使用Apache Continuum、Hudson、CruiseControl和Jenkins五年。除此之外，几年前我创建了一个托管的持续集成服务，名为<a href="http://www.fazend.com">fazend.com</a>，并于2013年改名为<a href="https://www.rultor.com">rultor.com</a>。目前，我还是<a href="http://www.travis-ci.org">Travis</a>和<a href="http://www.appveyor.com">AppVeyor</a>的活跃用户。</p><h2 id="how-continuous-integration-should-work">How Continuous Integration Should Work</h2><p>这个想法很简单、很明显。每次你向“master”分支（或Subversion中的“/trunk”）提交新的修改时，持续集成服务器（或服务）会尝试构建整个产品。“构建”意味着编译、单元测试、集成测试、质量分析等等。</p><p>结果要么是“成功”，要么是“失败”。如果是成功的，我们说“构建成功”。如果是失败的，我们说“构建失败”。构建通常会失败，因为有人通过提交新代码，导致以前通过的单元测试变为失败的。</p><p>这是问题的技术方面。它总是有效的。嗯，它可能存在一些问题，比如硬编码的依赖、环境之间缺乏隔离或并行构建冲突，但本文不涉及这些问题。如果应用程序编写良好且其单元测试稳定，持续集成就很简单。从技术上讲。</p><p>让我们来看看组织方面。</p><p>持续集成不仅仅是一个进行构建的服务器，还是一个应该“工作”的管理/组织过程。所谓“工作”，正如Jez Humble在《持续交付：通过构建、测试和部署自动化实现可靠软件发布》（http://amzn.to/2c7sR4V）第55页所说的。</p><blockquote><p>重要的是，如果构建失败，开发团队会立即停止当前的工作并立即修复问题。</p></blockquote><p>这就是不能运行和无法工作的。</p><h2 id="who-needs-this">Who Needs This?</h2><p>正如我们所看到的，持续集成是让整个开发团队暂停工作并修复破损的构建。让我重申一下。一旦构建出现问题，每个人都应该专注于修复它，并提交一个将构建恢复到稳定状态的代码。</p><p>现在，我的问题是，在一个积极工作的团队中，可能需要这个吗？</p><p>一个对尽快将新功能推向市场感兴趣的产品负责人？或者一个负责截止日期的项目经理？或者程序员们，他们讨厌修复其他人制造的错误，尤其是在压力下？</p><p>谁喜欢这种持续集成，谁需要它呢？</p><p>Nobody.</p><h2 id="what-happens-in-reality">What Happens In Reality?</h2><p>我可以告诉你，我见过这种情况多次。情景总是一样的。我们开始忽视持续集成构建的状态。无论构建是干净的还是破碎的，我们继续做之前的事情。</p><p>我们没有停下来修复它，就像Jez Humble建议的那样。</p><p>相反，我们忽视来自持续集成服务器的信息。</p><p>最终，也许是明天或者周一，我们会尽量找些空闲时间来修复构建。只是因为我们不喜欢仪表板上的红色按钮，想要把它变成绿色的。</p><h2 id="what-about-discipline">What About Discipline?</h2><p>是的，这个问题还有另一面。我们可以尝试在团队中强制执行纪律。我们可以制定严格的规定，即我们的构建始终保持干净，而且任何破坏构建的人都会受到某种惩罚。</p><p>尝试这样做，你会得到<a href="https://wiki.c2.com/?FearDrivenDevelopment"><em>恐惧驱动开发</em></a>。程序员会害怕将任何东西提交到代码库，因为他们知道如果他们导致构建失败，他们将不得不<a href="http://programmers.stackexchange.com/questions/79041">道歉</a>，至少要道歉。</p><p>在这种情况下，严格的纪律（我非常喜欢）只会使情况变得更糟。整个开发过程变得缓慢，程序员尽可能地将他们的代码保留给自己，以避免可能破坏构建。当是提交的时候，他们的更改如此庞大，导致合并变得非常困难，有时甚至不可能。</p><p>结果就是你会得到很多一次性的代码，由某人编写但从未提交到<code class="language-plaintext highlighter-rouge">master</code>，因为这种恐惧因素。</p><h2 id="ok-what-is-the-solution">OK, What Is The Solution?</h2><p>我之前写过这个问题；它被称为只读主分支。</p><p>很简单—禁止任何人将任何东西合并到<code class="language-plaintext highlighter-rouge">master</code>分支，并创建一个任何人都可以调用的脚本。该脚本将合并、测试和提交。脚本不会有任何例外。如果任何分支在任何一个单元测试中出现问题，整个分支将被拒绝。</p><p>换句话说：在代码进入<code class="language-plaintext highlighter-rouge">master</code>之前，引发红旗。</p><p>这解决了所有问题。</p><p>首先，构建始终是干净的。我们根本无法破坏它，因为除非他的代码保持构建干净，否则没有人能够提交。</p><p>其次，不会有任何破坏的担忧。仅仅是因为你在技术上做不到。你唯一能做的就是从合并脚本中得到一个负面的回应。然后你修复错误并告诉脚本再试一次。没有人看到这些尝试，你也不需要道歉。恐惧因素消失了。</p><p>顺便提一下，尝试使用<a href="https://www.rultor.com">rultor.com</a>来在你的项目中强制执行这个只读主分支原则。</p><p class="jekyll-chatgpt-translate">Translated by ChatGPT gpt-3.5-turbo/36 on 2023-10-01 at 08:08</p></article></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2023</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="https://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge" /></a> &nbsp; <a href="https://github.com/yegor256/blog/stargazers"> <img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square" alt="GitHub stars" /></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?53ed866f052"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>
