<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="In object-oriented programming, the more visible and accessible object attributes are, the lower the maintainability of the code around it." /> <meta name="keywords" content="" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="How Data Visibility Hurts Maintainability"/> <meta name="twitter:description" property="og:description" content="In object-oriented programming, the more visible and accessible object attributes are, the lower the maintainability of the code around it."/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/chinese/2019/03/12/data-and-maintainability.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?3a3b5d6c83f"/> <link rel="apple-touch-icon" href="/favicon.ico?3a3b5d6c83f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?3a3b5d6c83f"/> <link rel="stylesheet" href="/css/icons.css?3a3b5d6c83f"/> <link rel="canonical" href="https://www.yegor256.com/chinese/2019/03/12/data-and-maintainability.html" /> <title>How Data Visibility Hurts Maintainability</title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;385</a></li> <li ><a href="/teaching.html" title="My courses and lectures">Teaching</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Art</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке о политике в России, Украине и мире">Политика</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><h1 itemprop="name headline mainEntityOfPage">How Data Visibility Hurts Maintainability</h1></header> <article class="main" itemprop="articleBody"><p style="color: #C42C00;">The following text is a translation of the <a href='https://www.yegor256.com/2019/03/12/data-and-maintainability.html'>original article</a>, performed by <a href="https://chat.openai.com/">ChatGPT</a> (gpt-3.5-turbo):</p><p>J’ai tellement écrit sur la programmation orientée objet et ses pièges, affirmant que la plupart des modèles de conception et des “bonnes pratiques” auxquels nous sommes habitués sont en réalité incorrects et nuisibles, que j’ai totalement oublié d’expliquer le problème plus global. Quelqu’un m’a demandé il y a quelque temps dans un article de blog sur les données “nues” : Quel est le problème que nous résolvons et pourquoi la maintenabilité souffre-t-elle si nous n’encapsulons pas suffisamment nos données ? Voici la réponse.</p><p>Je relis les premières pages d’Elegant Objects, Volume 1, mon livre entièrement consacré au problème des défauts de la programmation orientée objet moderne, et j’ai découvert que la maintenabilité y est directement mentionnée : “L’objectif principal que je cherche à atteindre avec cette écriture est d’augmenter la maintenabilité de votre code”, puis cela explique également que la maintenabilité est “le temps nécessaire pour que je comprenne votre code”. On peut discuter de cela, mais la question demeure : comment le manque d’orientation objet “véritable” et d’encapsulation adéquate nuit-elle à la lisibilité ?</p><p>Je ne connais pas la réponse exacte, mais voici ma propre version, dérivée de mes années de programmation et de souffrance : un champ d’application plus restreint est le facteur clé de succès d’une meilleure maintenabilité, et le manque d’encapsulation entraîne un champ d’application plus large. Vous savez ce qu’est le champ de visibilité, n’est-ce pas ? Prenons ce code C comme exemple :</p><p>void print() { for (int i = 0; i &lt; 10; ++i) { printf(“%d * 2 = %d”, i, i * 2); } for (int i = 0; i &lt; 10; ++i) { printf(“%d * 3 = %d”, i, i * 3); } }</p><p>Il y a deux variables i, visibles dans deux boucles for différentes, deux portées de visibilité différentes. La taille de chaque portée est de trois lignes de code. Et que pensez-vous de ce code, faisant exactement la même chose :</p><p>c void print() { int i = 0; while (++i &lt; 10) { printf(“%d * 2 = %d”, i, i * 2); } i -= 10; while (++i &lt; 10) { printf(“%d * 3 = %d”, i, i * 3); } }</p><p>Maintenant, la portée de visibilité de i est de dix lignes de code. Le code fonctionne aussi bien que dans le premier extrait, mais sa maintenabilité est plus faible, car pour comprendre ce qui se passe et comment le modifier, j’ai besoin de plus de temps. Je dois lire un bloc de code de dix lignes, au lieu de deux blocs de trois lignes. Je dois comprendre la méthode print() entière avant de pouvoir commencer à apporter des modifications. Je dois comprendre l’algorithme de durée de vie de ce pauvre i et pourquoi, par exemple, il est décrémenté de 10 au lieu d’être réassigné à zéro - c’est la surprise que les programmeurs précédents m’ont laissée. Peut-être n’étaient-ils pas conscients de l’existence des boucles for ?</p><p>Il est évident que le premier extrait est meilleur que le second. La question est comment pouvons-nous amener les programmeurs à écrire du code de la même manière que le premier extrait et à réduire la portée de chaque variable et fonction ? Nous pouvons les enseigner, écrire des livres pour eux, les convaincre, les former, ou peut-être même les punir pour une portée plus large et un code moins lisible, mais si le langage de programmation lui-même ne prévient pas ces grandes portées, rien ne pourra vraiment aider. Il est préférable d’inventer un langage de programmation ou un paradigme de programmation entier pour rendre plus difficile, voire impossible, l’extension de la portée.</p><p>For example, the largest scope you can imagine in C/C++, Python, Ruby and many other modern languages is the global one, for example here:</p><p>c int i = 0; void print() { while (++i &lt; 10) { printf(“%d * 2 = %d”, i, i * 2); } }</p><p>Maintenant, la variable i est visible non seulement à l’intérieur de la fonction print(), mais dans tous les autres endroits de l’application que nous développons en HTML. La portée de visibilité de i est la taille de l’ensemble du code. Inutile de dire que cela rend le code de la fonction print() très illisible. Je ne peux tout simplement pas savoir quelle valeur attendre dans i lorsque l’exécution de print() commence - je dois parcourir tout le code pour le découvrir. Si c’est une petite application, peut-être que je m’en sortirai, mais si c’est un gros logiciel, j’aurai de gros problèmes. Alors, que diriez-vous de créer un langage de programmation qui n’autorise pas les variables globales ? Cela résoudra le problème. Les programmeurs n’auront pas la possibilité technique de les définir et leur portée sera inévitablement plus petite.</p><p>Je crois que les objets ont été inventés précisément dans ce but : obliger les programmeurs à garder leurs domaines de visibilité plus restreints. Eh bien, en réalité, les fonctions et les sous-routines ont également été inventées dans ce but, mais avec une emphase moins forte sur la partie “obliger”, car elles pouvaient coexister avec des parties de code qui n’étaient pas encore décomposées. Au contraire, les objets étaient censés être des citoyens de première classe d’un monde d’objets, communiquant uniquement avec d’autres objets.</p><p>They were.</p><p>Mais alors C++ est apparu et a tout gâché.</p><p>Let’s try to introduce an object to our C snippet, the way most C++ programmers would do it:</p><p>cpp classe Idx { public: int obtenir() { retourner v; } void ajouter(int a) { v += a; } private: int v = 0; }</p><p>And then:</p><p>cpp void print() { Idx i(); while (i.get() &lt; 10) { printf(“%d * 2 = %d”, i.get(), i.get() * 2); i.add(1); } i.add(-10); while (i.get() &lt; 10) { printf(“%d * 3 = %d”, i.get(), i.get() * 3); i.add(1); } }</p><p>Qu’est-ce qui a changé ? Pas grand-chose. Au lieu d’une simple variable “scalaire” i, nous avons un “objet” qui stocke une valeur entière à l’intérieur et fournit quelques méthodes pour y accéder et le modifier. Est-ce que cela nous a aidé à réduire la portée ? Pas du tout. De plus, la longueur de print() est maintenant même de quelques lignes de plus. Mais maintenant, nous avons un objet et pouvons appeler notre code orienté objet !</p><p>Ceci est la façon dont la plupart des “objets” sont utilisés de nos jours, principalement grâce à C++ : ils ne sont que des conteneurs de données, tandis que les véritables utilisateurs des données se trouvent toujours en dehors d’eux. L’objet Idx ne sait rien sur le véritable but des données qu’il détient. Il ne sait pas que sa variable v est utilisée comme un compteur d’étapes et qu’elle est multipliée par quelque chose avant d’imprimer du texte. Idx est un conteneur de données, tandis que la véritable logique se trouve en dehors de lui.</p><p>Le problème de maintenabilité n’est pas résolu, la portée n’est pas réduite, la complexité du code n’est pas diminuée. De plus, elle est augmentée, car maintenant, pour comprendre comment print() fonctionne, je dois savoir ce qui se trouve à l’intérieur de Idx. Le paradigme objet dans cet exemple particulier a promis de résoudre une partie du problème et de ne jamais m’en soucier, mais en réalité, il n’a fait qu’aggraver le problème en me donnant deux problèmes supplémentaires : print() et Idx.</p><p>Pourquoi est-ce grâce à C++? Parce que C++ a ajouté l’orientation objet par-dessus les idées de programmation procédurale de C, sans jamais envisager d’en interdire certaines, afin de forcer les programmeurs à écrire des objets tels qu’ils sont censés être écrits : comme des boîtes noires qui encapsulent tout ce dont ils ont besoin et qui n’autorisent jamais personne de l’extérieur à savoir ce qui se trouve à l’intérieur ! C++ n’a même pas fait une tentative pour passer du paradigme des procédures et des variables à celui des objets et des méthodes. Bjarne Stroustrup, le créateur de C++, a simplement donné aux programmeurs des méthodes et des classes, en disant : “Utilisez-les, elles sont plus pratiques que les variables, … ou peut-être pas, parfois, … Je ne sais pas” (je ne suis pas sûr que ce soit sa citation, mais je crois que c’est très proche de ce qu’il avait en tête). Lisez son livre, et vous verrez combien de pages sont consacrées à la philosophie de l’orientation objet et combien aux aspects techniques des opérateurs et des instructions.</p><p>Une solution orientée objet appropriée aurait un aspect différent et impliquerait une encapsulation réelle, où les données ne “s’échappent” jamais des limites de leur propriétaire. Tout d’abord, voici comment je concevrais Idx… eh bien, je le renommerais d’abord et l’appellerais Line:</p><p>cpp classe Ligne { public: Ligne(int m): mul(m) {}; void imprimer() { printf(“%d * %d = %d”, v, m, v * m); } bool suivant() { bool n = true; if (v &lt; 10) { ++v; } else { n = false; } return n; } private: int mul; int v = 0; }</p><p>Et maintenant voici le code de print():</p><p>cpp void imprimer() { Ligne a(2); while (a.suivant()) { a.imprimer(); } Ligne b(3); while (b.suivant()) { b.imprimer(); } }</p><p>Comme vous le voyez, print() n’a aucun accès aux données internes de Line. Tout ce que print() peut faire, c’est demander à Line d’avancer et de s’imprimer lui-même. Comment exactement cette logique est implémentée à l’intérieur de Line - personne ne sait et personne ne veut savoir. Étant donné que nous n’avons pas de getters dans Line, nous ne pouvons pas récupérer les données de celui-ci.</p><p>Puisque nous ne pouvons pas extraire les données, nous ne pouvons pas construire de logique dans le print(). Nous n’avons tout simplement rien avec quoi travailler, pas de données, pas d’entiers, pas de nombres. Nous ne pouvons traiter qu’avec des objets, qui ne nous font pas confiance avec leurs éléments internes. Nous ne pouvons que leur demander poliment de faire quelque chose pour nous. La portée de print() est maintenant assez limitée et très bien isolée des éléments internes de la Line. L’encapsulation appropriée nous a aidés à y parvenir : en ne exposant pas les éléments internes de la Line, nous avons rendu impossible à quiconque de s’inviter dans sa propre portée. Le print() ne peut tout simplement rien faire avec les données encapsulées par la Line.</p><p>Ainsi, plus les données sont visibles et accessibles, plus la maintenabilité est réduite.</p><p>La notion même de programmation orientée objet repose sur l’encapsulation, ce qui ne signifie pas seulement restreindre la capacité de modifier les attributs d’un objet depuis l’extérieur, mais aussi interdire à tout le monde de lire ces attributs.</p><blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">What is wrong with this Java object? <a href="https://twitter.com/hashtag/elegantobjects?src=hash&amp;ref_src=twsrc%5Etfw">#elegantobjects</a> <a href="https://twitter.com/hashtag/java?src=hash&amp;ref_src=twsrc%5Etfw">#java</a><br /><br />final class Time {<br /> int getHours();<br /> int getMinutes();<br /> int getSeconds();<br />}</p>&mdash; Yegor Bugayenko (@yegor256) <a href="https://twitter.com/yegor256/status/1109750701285142533?ref_src=twsrc%5Etfw">March 24, 2019</a></blockquote> <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p class="jekyll-chatgpt-translate">Translated by ChatGPT gpt-3.5-turbo/0.0.14</p></article></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2023</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="https://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge" /></a> &nbsp; <a href="https://github.com/yegor256/blog/stargazers"> <img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square" alt="GitHub stars" /></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?3a3b5d6c83f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>
