<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Do you use fixed or dynamic versions for your dependencies? I wasn't sure which approach is the right one until I found a formula for myself." /> <meta name="keywords" content="" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="My Recipe Against Dependency Hell"/> <meta name="twitter:description" property="og:description" content="Do you use fixed or dynamic versions for your dependencies? I wasn't sure which approach is the right one until I found a formula for myself."/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/chinese/2019/01/29/dependency-hell.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?3a3b5d6c83f"/> <link rel="apple-touch-icon" href="/favicon.ico?3a3b5d6c83f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?3a3b5d6c83f"/> <link rel="stylesheet" href="/css/icons.css?3a3b5d6c83f"/> <link rel="canonical" href="https://www.yegor256.com/chinese/2019/01/29/dependency-hell.html" /> <title>My Recipe Against Dependency Hell</title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;385</a></li> <li ><a href="/teaching.html" title="My courses and lectures">Teaching</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Art</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке о политике в России, Украине и мире">Политика</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><h1 itemprop="name headline mainEntityOfPage">My Recipe Against Dependency Hell</h1></header> <article class="main" itemprop="articleBody"><p style="color: #C42C00;">The following text is a translation of the <a href='https://www.yegor256.com/2019/01/29/dependency-hell.html'>original article</a>, performed by <a href="https://chat.openai.com/">ChatGPT</a> (gpt-3.5-turbo):</p><p>Spécifiez-vous les versions exactes de vos dépendances ? Je veux dire, lorsque votre paquet logiciel dépend d’un autre, écrivez-vous, dans votre pom.xml, Gruntfile, Gemfile, ou autre, sa version en tant que 1.13.5 ou simplement 1.+ ? J’ai toujours pensé qu’il était préférable d’utiliser des numéros de version exacts, pour éviter le soi-disant enfer des dépendances, et je n’étais pas seul. Cependant, très rapidement, j’ai réalisé que les versions dynamiques, comme 1.+, offrent plus de flexibilité. Il y a seulement quelques semaines, j’ai réalisé que ni l’une ni l’autre approche n’était correcte et j’ai trouvé une formule hybride pour moi-même. Sans surprise, j’ai encore vu que je n’étais pas seul.</p><p>Tout d’abord, laissez-moi expliquer ce qui ne va pas avec les dépendances fixes.</p><p>Disons que je crée une bibliothèque X, qui dépend, par exemple, d’une installation de journalisation, qui est une bibliothèque tierce, pas la mienne. Ainsi, ma bibliothèque X a une dépendance. La bibliothèque de journalisation a un numéro de version, tel que 1.13.5. Je mets ce texte dans le fichier pom.xml de X:</p><p>xml</p><dependency> <groupId>com.example</groupId> <artifactId>log-me</artifactId> <version>1.13.5</version> </dependency><p>De nombreux défenseurs des dépendances fixes soutiennent qu’il est très important de respecter la version 1.13.5, au lieu d’utiliser une version dynamique plus flexible (c’est-à-dire n’importe quelle version à partir de 1.13 ou plus récente). Pourquoi ? Parce que les versions futures pourraient introduire quelque chose qui pourrait compromettre la construction de X. Elles pourraient modifier les interfaces, renommer des classes ou des méthodes, ou supprimer quelque chose que j’utilise. On ne sait jamais ce que les auteurs de cette bibliothèque log-me pourraient faire. C’est pourquoi il vaut mieux nous attacher à la version 1.13.5 et considérer que c’est fait.</p><p>This is true.</p><p>But.</p><p>Que se passe-t-il si la bibliothèque X est utilisée par une autre bibliothèque Y, qui dépend également de log-me mais nécessite la version 1.14.1 ? Boom ! Il y aura un conflit dans la bibliothèque Y : Maven, le gestionnaire de paquets, ne pourra pas décider quelle version utiliser. Il sera nécessaire de résoudre le conflit d’une manière ou d’une autre. Dans le cas de Maven, il est possible de le résoudre, mais dans le cas de Rake, par exemple, cela n’est pas possible (à ma connaissance).</p><p>Pour résoudre ce problème, la bibliothèque Y devra spécifier explicitement quelle version doit être utilisée. Mais elle ne peut pas être certaine que la version 1.14.1 fonctionnera correctement avec la bibliothèque X. Pour confirmer cela, il faudrait que les auteurs de la bibliothèque X la testent. Donc, tout ce que les créateurs de la bibliothèque Y peuvent faire, c’est l’essayer et espérer le meilleur. Avec d’autres outils de construction, comme Rake, les auteurs n’auront pas d’autre choix que de demander aux auteurs de la bibliothèque X de passer à la version 1.14.1 et de publier une nouvelle version. Ensuite, la bibliothèque Y pourra utiliser la bibliothèque X.</p><p>Ce problème n’existerait pas si la bibliothèque X dépendait de la version 1.13 au lieu de cela. Mais, comme je l’ai mentionné précédemment, dans ce cas, ses auteurs poseraient une bombe à retardement - éventuellement, l’une des versions futures finira par casser la compilation.</p><p>So what is the solution?</p><p>Voici ma formule : Si vous faites confiance aux auteurs de la bibliothèque, utilisez la version dynamique ; si vous ne leur faites pas confiance, utilisez une version fixe.</p><p>Ce que je veux dire, c’est : est-ce que vous croyez qu’ils sont assez professionnels pour penser à la compatibilité ascendante et suivre les principes de versionnement sémantique ? S’ils sont suffisamment prudents pour ne pas supprimer ou modifier quelque chose qui pourrait affecter les versions futures sans changer également le numéro principal de la version, alors vous pouvez leur faire confiance. Comment sait-on à qui faire confiance ? Je ne fais confiance à personne, sauf à mes propres bibliothèques et à un très petit nombre d’autres bibliothèques que j’ai examinées sur GitHub et dont j’ai vérifié la qualité de leurs dépôts.</p><p>Bien sûr, vous ne pouvez pas faire entièrement confiance à quelqu’un, mais c’est la formule que j’ai adoptée pour moi-même maintenant. Vous pouvez voir comment cela fonctionne dans ce Gemfile, par exemple. Faites attention aux numéros de version. Ceux qui commencent par ~&gt; ou &gt;= sont dynamiques, tandis que les autres sont fixes. C’est une approche hybride, mais cela fonctionne pour moi.</p><p>Maybe it will help you too.</p><p class="jekyll-chatgpt-translate">Translated by ChatGPT gpt-3.5-turbo/0.0.14</p></article></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2023</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="https://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge" /></a> &nbsp; <a href="https://github.com/yegor256/blog/stargazers"> <img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square" alt="GitHub stars" /></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?3a3b5d6c83f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>
