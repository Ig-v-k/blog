<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="What should code reviewers do when they suspect that errors exist but can't be spotted by visual inspection of the code?" /> <meta name="keywords" content="" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Does Code Review Involve Testing?"/> <meta name="twitter:description" property="og:description" content="What should code reviewers do when they suspect that errors exist but can't be spotted by visual inspection of the code?"/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/chinese/2019/12/03/testing-in-code-review.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?3a3b5d6c83f"/> <link rel="apple-touch-icon" href="/favicon.ico?3a3b5d6c83f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?3a3b5d6c83f"/> <link rel="stylesheet" href="/css/icons.css?3a3b5d6c83f"/> <link rel="canonical" href="https://www.yegor256.com/chinese/2019/12/03/testing-in-code-review.html" /> <title>Does Code Review Involve Testing?</title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;385</a></li> <li ><a href="/teaching.html" title="My courses and lectures">Teaching</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Art</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке о политике в России, Украине и мире">Политика</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><h1 itemprop="name headline mainEntityOfPage">Does Code Review Involve Testing?</h1></header> <article class="main" itemprop="articleBody"><p style="color: #C42C00;">The following text is a translation of the <a href='https://www.yegor256.com/2019/12/03/testing-in-code-review.html'>original article</a>, performed by <a href="https://chat.openai.com/">ChatGPT</a> (gpt-3.5-turbo):</p><p>Quand vous examinez une demande de tirage/fusion de quelqu’un, est-ce que vous vérifiez la branche et exécutez la construction ? En général, je ne le fais pas, mais certaines personnes le font. Leur raison évidente est que l’exécution d’une construction, voire le test manuel du produit, aide à trouver des erreurs plus importantes. Simplement regarder le code source ne permet pas de détecter tous les défauts visuels récemment introduits dans le HTML/CSS, par exemple. Il vaut mieux vérifier la branche, démarrer Apache, ouvrir le site dans Chrome, et voir ce qui ne fonctionne pas. Ensuite, faire une capture d’écran, la joindre à la demande de tirage, et la renvoyer à l’auteur. Cependant, je suis en désaccord avec cela, et voici pourquoi.</p><p>La discussion n’est pas nouvelle, consultez ceci et ceci sur SO. Cependant, il semble que toutes les réponses là-bas manquent le point essentiel.</p><p>Comme nous le savons tous, il y a deux rôles contradictoires dans tout projet logiciel : les constructeurs et les destructeurs, également connus sous le nom de programmeurs et de testeurs. Les programmeurs ajoutent de nouvelles fonctionnalités et corrigent les bugs. Leur résultat est la quantité de fonctionnalités créées : plus il y en a, mieux c’est. Tandis que les testeurs brisent le produit et signalent les bugs, faisant tout ce qu’ils peuvent pour prouver qu’il n’est pas encore prêt à être livré au client. À un certain moment, l’équipe (ou la direction) décide que la lutte est terminée et que le produit peut être livré.</p><p>Grâce à cette qualité essentielle de conflit, l’excellence est atteinte.</p><p>Les programmeurs terminent leur part du combat lorsque le code passe par le pipeline de fusion : les modifications sont effectuées sur leurs ordinateurs portables, les tests unitaires réussissent en local, l’analyse statique ne se plaint pas, la construction est propre et la branche est fusionnée avec le tronc. C’est là que les programmeurs s’arrêtent et obtiennent leurs bonus.</p><p>Les testeurs terminent leur part du combat lorsqu’ils parviennent à trouver un nouveau défaut dans le produit déployé dans l’environnement de mise en scène ou de production : le bug est trouvé, signalé et accepté par le projet. C’est à ce moment que les testeurs s’arrêtent et reçoivent leurs bonus.</p><p>C’est évident. Si ce n’est pas le cas, vous voudrez peut-être lire The Art of Software Testing de Glenford Myers ou Code Ahead de Yegor Bugayenko. Vous voudrez peut-être également regarder cette vidéo.</p><p>Maintenant, où est l’endroit pour un examinateur de code dans ce conflit ?</p><p>Je crois que la revue de code fait partie du pipeline de fusion, en collaboration avec les tests unitaires, les analyseurs statiques, les linters, les outils de contrôle de la couverture, les testeurs de mutation et tout ce que le projet peut souhaiter y ajouter, afin de rendre la vie des programmeurs plus difficile et la qualité du code source plus élevée. L’objectif d’un pipeline de fusion est de protéger le dépôt de code des programmeurs.</p><p>Les relecteurs de code ne sont pas différents des linters ou des analyseurs statiques : ils empêchent les branches contenant un mauvais code d’entrer dans le tronc. Lorsqu’ils bloquent, ils donnent leurs raisons. Leur travail est terminé (tout comme les linters) lorsqu’ils parviennent à trouver un problème dans la branche et à l’expliquer. Un linter, lorsqu’il rejette une demande de fusion, indique précisément où se trouve le problème, quelle ligne, et comment il peut être résolu. Voilà ce qu’un bon relecteur de code doit faire : trouver une ligne problématique, expliquer le problème et suggérer une solution.</p><p>C’est pour cela que les relecteurs de code doivent être rémunérés : pour les évaluations complétées.</p><p>Qu’est-ce qu’une revue terminée ? Est-ce que “Tout va bien” semble être une revue terminée ? Pour un linter, oui ; pour un examinateur de code, non. Celui-ci est bien meilleur : “J’ai trouvé trois problèmes, je les ai expliqués et ils ont été soit débattus, soit corrigés.” Voici à quoi peut ressembler la description de poste d’un examinateur de code : Trouver les trois problèmes les plus critiques, les expliquer et s’assurer qu’ils sont soit corrigés, soit correctement argumentés.</p><p>Comment les examineurs trouvent ces trois problèmes - c’est à eux de décider. Ils peuvent effectuer des inspections visuelles du code ou exécuter la construction. Cependant, ils seront toujours payés lorsqu’ils parviennent à trouver des problèmes et à s’assurer que l’auteur du code les comprend et les résout ou explique pourquoi ils ne peuvent pas être résolus (ou ne sont pas des problèmes). Une inspection visuelle du code est rapide, tandis que la vérification de la branche et l’exécution de la construction sont des opérations beaucoup plus longues. De plus, il est très difficile d’expliquer un bogue trouvé après l’exécution de la construction localement dans le format de révision du code. La discussion avec l’auteur de la branche prendra plus de temps, ce qui signifie plus de temps pour terminer la révision du code, ce qui signifie une efficacité inférieure de l’examineur du code.</p><p>Mon point est que les relecteurs de code intelligents ne font pas ça, car ce n’est pas efficace. Faites attention, pas parce qu’ils s’en fichent, mais parce qu’ils connaissent une meilleure façon de contribuer au projet. Soyons honnêtes, lorsque la branche devant nous passe tous les contrôles automatisés tels que les linters et les tests unitaires, mais qu’elle présente toujours des bugs que nous ne pouvons reproduire qu’en exécutant le code, quelque chose ne va pas avec nos tests automatisés. Un relecteur de code efficace, responsable et avide n’expliquera pas à l’auteur du code ce qui ne va pas. À la place, un nouveau bug sera créé, pour blâmer le pipeline de fusion d’être trop faible. Et, bien sûr, ce nouveau bug sera récompensé.</p><p>Ainsi, en tant que relecteur de code, vous pouvez travailler avec la branche localement, la tester et signaler vos résultats à l’auteur. Mais cela irait à l’encontre de vos intérêts personnels et ne serait pas bénéfique pour le projet. Au lieu de cela, vous devriez vous plaindre auprès du projet de la faible qualité des tests automatisés et mettre la revue en attente. Lorsque la plainte est résolue, les tests deviennent plus solides, vous revenez à la revue, qui sera rejetée par le pipeline de fusion, pas par vous.</p><p>Dans ce cas, tout le monde y gagne : le pipeline devient plus solide, vous gagnez un bonus supplémentaire pour le bogue signalé, et la revue est rejetée pour une raison très spécifique et reproductible.</p><p>P.S. L’idée de cet article de blog a été suggérée par Robert Sösemann.</p><p>Vous examinez une demande de tirage et soupçonnez qu’elle ne fonctionne pas, même si le statut CI est vert. Que faites-vous ?</p><p class="jekyll-chatgpt-translate">Translated by ChatGPT gpt-3.5-turbo/0.0.14</p></article></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2023</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="https://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge" /></a> &nbsp; <a href="https://github.com/yegor256/blog/stargazers"> <img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square" alt="GitHub stars" /></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?3a3b5d6c83f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>
