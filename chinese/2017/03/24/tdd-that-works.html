<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Test-driven development is a brilliant idea...if it works; in reality, it doesn't work the way most software books explain it." /> <meta name="keywords" content="" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="The TDD That Works for Me"/> <meta name="twitter:description" property="og:description" content="Test-driven development is a brilliant idea...if it works; in reality, it doesn't work the way most software books explain it."/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/chinese/2017/03/24/tdd-that-works.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?3a3b5d6c83f"/> <link rel="apple-touch-icon" href="/favicon.ico?3a3b5d6c83f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?3a3b5d6c83f"/> <link rel="stylesheet" href="/css/icons.css?3a3b5d6c83f"/> <link rel="canonical" href="https://www.yegor256.com/chinese/2017/03/24/tdd-that-works.html" /> <title>The TDD That Works for Me</title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;385</a></li> <li ><a href="/teaching.html" title="My courses and lectures">Teaching</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Art</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке о политике в России, Украине и мире">Политика</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><h1 itemprop="name headline mainEntityOfPage">The TDD That Works for Me</h1></header> <article class="main" itemprop="articleBody"><p style="color: #C42C00;">The following text is a translation of the <a href='https://www.yegor256.com/2017/03/24/tdd-that-works.html'>original article</a>, performed by <a href="https://chat.openai.com/">ChatGPT</a> (gpt-3.5-turbo):</p><p>Le développement piloté par les tests (alias TDD) a été redécouvert par Kent Beck et expliqué dans son célèbre livre en 2002. En 2014, David Heinemeier Hansson (le créateur de Ruby on Rails) a déclaré que le TDD est mort et nuit seulement à l’architecture. Robert Martin (l’inventeur des principes SOLID) n’était pas d’accord et a expliqué que le TDD peut ne pas fonctionner que dans certains cas. Quelques jours plus tard, il a même comparé l’importance du TDD à l’importance du lavage des mains en médecine, ajoutant que “cela ne me surprendrait pas si, un jour, le TDD était soutenu par la force de la loi.” Deux ans plus tard, il a écrit davantage à ce sujet, encore plus, et plus encore. Ce sujet semble être d’actualité. Bien sûr, j’ai ma propre opinion à ce sujet; laissez-moi la partager.</p><p>En théorie, TDD signifie “écrire les tests d’abord et le code ensuite.” En pratique, selon mon expérience en travaillant avec plus de 250 développeurs au cours des quatre dernières années, cela signifie écrire les tests lorsque nous sommes de bonne humeur et n’avons rien d’autre à faire. Et cela est tout à fait logique, si nous comprenons le TDD littéralement, tel que décrit dans le livre.</p><p>Écrire un test pour une classe sans avoir cette classe devant soi est difficile. Je dirais même impossible, si nous parlons de code réel, et non d’exemples de calculatrice. C’est également très inefficace, car les tests, par définition, sont beaucoup plus rigides que le code qu’ils valident. Les créer en premier entraînera de nombreux cycles de refonte jusqu’à ce que la conception soit stabilisée.</p><p>J’ai personnellement écrit près de 300 000 lignes de code en Java, Ruby, PHP et JavaScript au cours des quatre dernières années, et je n’ai jamais fait de TDD selon les règles du livre : “écrire un test, le faire fonctionner, le rendre correct”. Jamais.</p><p>Même si je suis un grand fan des tests automatisés (unitaires ou d’intégration) et que je suis totalement d’accord avec Oncle Bob : ceux qui n’écrivent pas de tests doivent être emprisonnés, j’ai juste ma propre interprétation de la TDD. Voici à quoi cela ressemble :</p><p>D’abord, j’écris du code sans aucun test. Beaucoup de code. J’implémente la fonctionnalité et crée la conception. Des dizaines de classes. Bien sûr, la construction est automatisée, le pipeline de déploiement est configuré et je peux tester le produit moi-même dans un environnement isolé. Je m’assure que “ça fonctionne sur ma machine”.</p><p>Ensuite, je le déploie en production. Oui, cela va vers mes “utilisateurs” sans aucun test car cela fonctionne pour moi. Ce sont soit de vrais utilisateurs s’il s’agit d’un projet open source ou l’un de mes projets personnels, soit des testeurs manuels s’il s’agit d’un projet rémunéré.</p><p>Ensuite, ils le cassent. Ils le testent ou l’utilisent, peu importe. Ils cherchent simplement des problèmes et signalent des bogues. Autant qu’ils le peuvent.</p><p>Right after some bugs are reported, I pick the most critical of them and…voilà!…I create an automated test. The bug is a message to me that my tests are weak; I have to fix them first. A new test will prove that the code is broken. Or maybe I fix an existing one. This is where I go “tests first.” I don’t touch the production code until I manage to break my build and prove the problem’s existence with a new test. Then, I do git commit.</p><p>Enfin, il est temps de résoudre le problème. Je fais des modifications dans le code de production afin de m’assurer que la construction est à nouveau opérationnelle. Ensuite, je fais un git commit et un git push. Et je passe à l’étape de “déploiement” ; le produit mis à jour est mis à disposition de mes utilisateurs.</p><p>De temps en temps, je dois apporter des modifications importantes au produit, comme introduire une nouvelle fonctionnalité ou effectuer une refonte massive. Dans ce cas, je retourne à la première étape et le fais sans tests.</p><p>La justification derrière cette approche sans tests préalables est simple: Nous n’avons pas besoin de tester tant que cela ne fonctionne pas, principalement parce que nous comprenons qu’il n’est techniquement pas possible de tout tester ou de corriger tous les bugs. Nous devons corriger uniquement ce qui est visible et intolérable pour l’entreprise. Si l’entreprise n’est pas concernée ou si nos utilisateurs/testeurs ne voient pas nos bugs, nous ne devons pas gaspiller les ressources du projet pour les corriger.</p><p>D’un autre côté, lorsque l’entreprise ou nos utilisateurs/testeurs se plaignent, nous devons être très stricts envers nous-mêmes ; notre système de test est faible et doit être corrigé en premier. Nous ne pouvons pas simplement corriger le code de production et le déployer, car dans ce cas, nous pourrions refaire cette erreur après une certaine refonte, et nos tests ne la détecteront pas. L’utilisateur trouvera à nouveau le bug, et l’entreprise devra nous payer à nouveau pour le corriger. Ce serait une perte de ressources.</p><p>Comme vous pouvez le voir, tout est motivé par l’argent. Tout d’abord, ne réparez rien si personne ne paie pour cela. Deuxièmement, réparez-le une fois pour toutes s’ils paient réellement. C’est aussi simple que cela.</p><p>Grâce à cette approche de test et de correction uniquement en cas de problème, l’équilibre entre le code de production et le code de test n’est pas le même tout au long du cycle de vie du projet. Lorsque le projet démarre, il y a presque aucun test. Ensuite, le nombre de tests augmente en même temps que le nombre de bugs. Finalement, la situation se stabilise et nous pouvons passer le produit de la version bêta à la première version.</p><p>J’ai créé un outil en ligne de commande simple afin de démontrer les statistiques de quelques-uns de mes projets, pour prouver mon point. Jetez un œil à ces graphiques :</p><p>yegor256/takes (Cadre Web, Java):</p><p>yegor256/xembly (constructeur XML, Java) :</p><p>jcabi/jcabi-aspects (bibliothèque AOP, Java):</p><p>yegor256/s3auth (S3 gateway, Java):</p><p>First commercial project:</p><p>Second commercial project:</p><p>Dans chaque graphique, il y a deux parties. La première en haut démontre la dynamique de production des Hits-of-Code (ligne verte), des HoC liés aux tests (ligne rouge), et du nombre de problèmes signalés à GitHub (ligne orange).</p><p>La partie inférieure montre la taille de la partie HoC liée aux tests par rapport à l’ensemble des activités du projet. En d’autres termes, elle montre combien d’efforts le projet a investi dans les tests automatisés, par rapport à l’effort total.</p><p>Voici ce à quoi je veux que vous prêtiez attention : La forme de la courbe est presque la même dans chaque projet. Elle ressemble beaucoup à une courbe d’apprentissage, où nous commençons à apprendre rapidement puis ralentissons avec le temps.</p><p>Cela illustre parfaitement ce que je viens de décrire ci-dessus. Je n’ai pas besoin de tests au début du projet ; je les crée plus tard lorsque mes utilisateurs expriment le besoin en les signalant par des bugs. Cette dynamique me semble tout à fait logique.</p><p>Vous pouvez également analyser votre projet en utilisant mon outil et voir le graphique. Il serait intéressant de savoir quel type de courbe vous obtiendrez.</p><blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">When do you write unit tests? <a href="https://twitter.com/hashtag/testing?src=hash&amp;ref_src=twsrc%5Etfw">#testing</a></p>&mdash; Yegor Bugayenko (@yegor256) <a href="https://twitter.com/yegor256/status/1094483307130060803?ref_src=twsrc%5Etfw">February 10, 2019</a></blockquote> <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p class="jekyll-chatgpt-translate">Translated by ChatGPT gpt-3.5-turbo/0.0.14</p></article></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2023</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="https://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge" /></a> &nbsp; <a href="https://github.com/yegor256/blog/stargazers"> <img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square" alt="GitHub stars" /></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?3a3b5d6c83f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>
