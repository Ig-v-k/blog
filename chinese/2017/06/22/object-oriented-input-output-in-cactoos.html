<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Instead of calling static procedures we may want to use objects, the way they are supposed to be used; that's why Cactoos." /> <meta name="keywords" content="" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Object-Oriented Declarative Input/Output in Cactoos"/> <meta name="twitter:description" property="og:description" content="Instead of calling static procedures we may want to use objects, the way they are supposed to be used; that's why Cactoos."/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/chinese/2017/06/22/object-oriented-input-output-in-cactoos.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?3a3b5d6c83f"/> <link rel="apple-touch-icon" href="/favicon.ico?3a3b5d6c83f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?3a3b5d6c83f"/> <link rel="stylesheet" href="/css/icons.css?3a3b5d6c83f"/> <link rel="canonical" href="https://www.yegor256.com/chinese/2017/06/22/object-oriented-input-output-in-cactoos.html" /> <title>Object-Oriented Declarative Input/Output in Cactoos</title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;385</a></li> <li ><a href="/teaching.html" title="My courses and lectures">Teaching</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Art</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке о политике в России, Украине и мире">Политика</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><h1 itemprop="name headline mainEntityOfPage">Object-Oriented Declarative Input/Output in Cactoos</h1></header> <article class="main" itemprop="articleBody"><p style="color: #C42C00;">The following text is a translation of the <a href='https://www.yegor256.com/2017/06/22/object-oriented-input-output-in-cactoos.html'>original article</a>, performed by <a href="https://chat.openai.com/">ChatGPT</a> (gpt-3.5-turbo):</p><p>Cactoos est une bibliothèque de primitives Java orientées objet sur laquelle nous avons commencé à travailler il y a quelques semaines seulement. L’objectif était de proposer une alternative propre et plus déclarative à JDK, Guava, Apache Commons et autres. Au lieu d’appeler des procédures statiques, nous voulons utiliser des objets, comme ils sont censés être utilisés. Voyons comment les entrées/sorties fonctionnent de manière purement orientée objet.</p><p>Avertissement : La version que j’utilise au moment de l’écriture est 0.9. Les versions ultérieures peuvent avoir des noms de classes différents et un design totalement différent.</p><p>Let’s say you want to read a file. This is how you would do it with the static method readAllBytes() from the utility class Files in JDK7:</p><p>java byte[] content = Files.readAllBytes( new File(“/tmp/photo.jpg”).toPath() );</p><p>Ce code est très impératif—il lit le contenu du fichier ici et maintenant, en le plaçant dans le tableau.</p><p>This is how you do it with Cactoos:</p><p>java Bytes source = new InputAsBytes( new FileAsInput( new File(“/tmp/photo.jpg”) ) );</p><p>Faites attention - il n’y a pas encore d’appels de méthode. Juste trois constructeurs de trois classes qui composent un objet plus grand. La source de l’objet est de type Bytes et représente le contenu du fichier. Pour obtenir ce contenu, nous appelons sa méthode asBytes().</p><p>java bytes[] content = source.asBytes();</p><p>C’est à ce moment-là que le système de fichiers est touché. Cette approche, comme vous pouvez le voir, est absolument déclarative et grâce à cela possède tous les avantages de l’orientation objet.</p><p>Here is another example. Say you want to write some text into a file. Here is how you do it in Cactoos. First you need the Input:</p><p>java Input input = new BytesAsInput( new TextAsBytes( new StringAsText( “Bonjour, monde!” ) ) );</p><p>Then you need the Output:</p><p>java Sortie sortie = new FichierCommeSortie( new Fichier(“/tmp/hello.txt”) );</p><p>Maintenant, nous voulons copier l’entrée vers la sortie. Il n’y a pas d’opération “copie” en POO pure. De plus, il ne doit y avoir aucune opération du tout. Juste des objets. Nous avons une classe nommée TeeInput, qui est une entrée qui copie tout ce que vous lisez de celle-ci vers la sortie, similaire à ce que TeeInputStream d’Apache Commons fait, mais encapsulé. Donc nous ne copions pas, nous créons une entrée qui copiera si vous la touchez.</p><p>java Entrée tee = new TeeInput(input, output);</p><p>Maintenant, nous devons “toucher” cela. Et nous devons toucher chaque octet individuel, afin de nous assurer qu’ils sont tous copiés. Si nous utilisons simplement la fonction read() sur le premier octet, seul un octet sera copié dans le fichier. La meilleure façon de tous les toucher est de calculer la taille de l’objet tee, en passant octet par octet. Nous avons un objet pour cela, appelé LengthOfInput. Il encapsule une entrée (Input) et se comporte comme sa longueur en octets.</p><p>java Scalar<Long> length = new LengthOfInput(tee);</Long></p><p>Ensuite, nous en retirons la valeur et l’opération d’écriture du fichier a lieu:</p><p>java long len = length.value();</p><p>Ainsi, toute l’opération d’écriture de la chaîne dans le fichier ressemblera à ceci:</p><p>java new LengthOfInput( new TeeInput( new BytesAsInput( new TextAsBytes( new StringAsText( “Hello, world!” ) ) ), new FileAsOutput( new File(“/tmp/hello.txt”) ) ) ).value(); // happens here</p><p>Ceci est son alternative procédurale à partir de JDK7:</p><p>java Les fichiers.write( nouveau Fichier(“/tmp/hello.txt”).toPath(), “Hello, world!”.getBytes() );</p><p>“Pourquoi est-ce que l’approche orientée objet est meilleure, même si elle est plus longue ?” je vous entends demander. Parce qu’elle permet une déconnexion parfaite des concepts, tandis que l’approche procédurale les maintient ensemble.</p><p>Disons que vous concevez une classe qui est censée crypter un texte et l’enregistrer dans un fichier. Voici comment vous la concevriez de manière procédurale (bien sûr, ce n’est pas un vrai cryptage) :</p><p>java class Encoder { private final File target; Encoder(final File file) { this.target = file; } void encode(String text) { Files.write( this.target, text.replaceAll(“[a-z]”, “*”) ); } }</p><p>Fonctionne bien, mais que se passera-t-il lorsque vous décidez de l’étendre pour écrire également dans un OutputStream ? Comment allez-vous modifier cette classe ? À quel point sera-t-elle moche après cela ? C’est parce que la conception n’est pas orientée objet.</p><p>This is how you would do the same design, in an object-oriented way, with Cactoos:</p><p>Please, translate this paragraph from English to French, don’t change proper nouns:</p><p>java class Encoder { private final Output target; Encoder(final File file) { this(new FileAsOutput(file)); } Encoder(final Output output) { this.target = output; } void encode(String text) { new LengthOfInput( new TeeInput( new BytesAsInput( new TextAsBytes( new StringAsText( text.replaceAll(“[a-z]”, “*”) ) ) ), this.target ) ).value(); } }</p><p>Que faisons-nous avec ce design si nous voulons que OutputStream soit accepté ? Nous ajoutons simplement un constructeur secondaire.</p><p>java classe Encoder { Encoder(final OutputStream stream) { this(new OutputStreamAsOutput(stream)); } }</p><p>Fait. C’est aussi simple et élégant que ça.</p><p>C’est parce que les concepts sont parfaitement séparés et que la fonctionnalité est encapsulée. Dans l’exemple procédural, le comportement de l’objet se trouve à l’extérieur de celui-ci, dans la méthode encode(). Le fichier lui-même ne sait pas comment écrire, une procédure externe Files.write() le sait à la place.</p><p>Au contraire, dans la conception orientée objet, le FileAsOutput sait comment écrire, et personne d’autre ne le sait. La fonctionnalité d’écriture de fichier est encapsulée et cela permet de décorer les objets de toutes les manières possibles, créant ainsi des objets composites réutilisables et remplaçables.</p><p>Voyez-vous maintenant la beauté de la POO ?</p><p class="jekyll-chatgpt-translate">Translated by ChatGPT gpt-3.5-turbo/0.0.14</p></article></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2023</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="https://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge" /></a> &nbsp; <a href="https://github.com/yegor256/blog/stargazers"> <img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square" alt="GitHub stars" /></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?3a3b5d6c83f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>
