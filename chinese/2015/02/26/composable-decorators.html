<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="A decorator pattern, while being the best instrument to keep objects highly cohesive, solid, and loosely coupled, is unfortunately not very popular in traditional Java programming." /> <meta name="keywords" content="" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Composable Decorators vs. Imperative Utility Methods"/> <meta name="twitter:description" property="og:description" content="A decorator pattern, while being the best instrument to keep objects highly cohesive, solid, and loosely coupled, is unfortunately not very popular in traditional Java programming."/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/chinese/2015/02/26/composable-decorators.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?3a3b5d6c83f"/> <link rel="apple-touch-icon" href="/favicon.ico?3a3b5d6c83f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?3a3b5d6c83f"/> <link rel="stylesheet" href="/css/icons.css?3a3b5d6c83f"/> <link rel="canonical" href="https://www.yegor256.com/chinese/2015/02/26/composable-decorators.html" /> <title>Composable Decorators vs. Imperative Utility Methods</title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;385</a></li> <li ><a href="/teaching.html" title="My courses and lectures">Teaching</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Art</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке о политике в России, Украине и мире">Политика</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><h1 itemprop="name headline mainEntityOfPage">Composable Decorators vs. Imperative Utility Methods</h1></header> <article class="main" itemprop="articleBody"><p style="color: #C42C00;">The following text is a translation of the <a href='https://www.yegor256.com/2015/02/26/composable-decorators.html'>original article</a>, performed by <a href="https://chat.openai.com/">ChatGPT</a> (gpt-3.5-turbo):</p><p>Le modèle de décoration est mon préféré parmi tous les autres modèles que je connais. C’est un mécanisme très simple mais très puissant pour rendre votre code hautement cohérent et peu couplé. Cependant, je pense que les décorateurs ne sont pas assez utilisés. Ils devraient être partout, mais ce n’est pas le cas. Le plus grand avantage que nous obtenons des décorateurs est qu’ils rendent notre code composable. C’est pourquoi le titre de cet article est “décorateurs composables”. Malheureusement, au lieu d’utiliser des décorateurs, nous utilisons souvent des méthodes utilitaires impératives, ce qui rend notre code procédural plutôt qu’orienté objet.</p><p>Premièrement, un exemple pratique. Voici une interface pour un objet qui est censé lire un texte quelque part et le renvoyer :</p><p>java interface Text { String read(); }</p><p>Voici une mise en œuvre qui lit le texte à partir d’un fichier.</p><p>java final class TextInFile implements Text { private final File file; public TextInFile(final File src) { this.file = src; } @Override public String read() { return new String( Files.readAllBytes(this.file.toPath()), “UTF-8” ); } }</p><p>Et maintenant le décorateur, qui est une autre implémentation de Text qui supprime tous les caractères non imprimables du texte.</p><p>java classe finale PrintableText implémente Text { private final Text origin; public PrintableText(final Text text) { this.origin = text; } @Override public String read() { return this.origin.read() .replaceAll(“[^\p{Print}]”, “”); } }</p><p>Here is how I’m using it:</p><p>java final Text text = new PrintableText( new TextInFile(new File(“/tmp/a.txt”)) ); String content = text.read();</p><p>Comme vous pouvez le voir, le PrintableText ne lit pas le texte à partir du fichier. Il se soucie peu d’où provient le texte. Il délègue la lecture du texte à l’instance encapsulée de Text. La façon dont cet objet encapsulé traitera le texte et où il le récupérera ne concerne pas PrintableText.</p><p>Let’s continue and try to create an implementation of Text that will capitalize all letters in the text.</p><p>s’il vous plaît, traduisez ce paragraphe de l’anglais en français, ne changez pas les noms propres :</p><p>java classe finale AllCapsText implémente Texte { private final Texte origine; public AllCapsTexte(final Texte texte) { this.origine = texte; } @Override public String lire() { return this.origine.lire().toUpperCase(Locale.ENGLISH); } }</p><p>Que diriez-vous d’un texte qui réduit l’entrée?</p><p>java classe finale TrimmedText implémente Text { private final Text origin; public TrimmedText(final Text text) { this.origin = text; } @Override public String read() { return this.origin.read().trim(); } }</p><p>Je peux continuer indéfiniment avec ces décorateurs. Je peux en créer beaucoup, adaptés à leurs propres cas d’utilisation individuels. Mais voyons comment ils peuvent tous fonctionner ensemble. Disons que je veux lire le texte depuis le fichier, le mettre en majuscules, le couper et supprimer tous les caractères non imprimables. Et je veux que cela soit déclaratif. Voici ce que je fais :</p><p>java final Text text = new AllCapsText( new TrimmedText( new PrintableText( new TextInFile(new File(“/tmp/a.txt”)) ) ) ); String content = text.read();</p><p>Translated to French:</p><p>java final Texte texte = new AllCapsTexte( new TrimmedTexte( new PrintableTexte( new TexteDansFichier(new Fichier(“/tmp/a.txt”)) ) ) ); String contenu = texte.lire();</p><p>Premièrement, je crée une instance de Text, en composant plusieurs décorateurs en un seul objet. Je définis de manière déclarative le comportement du texte sans l’exécuter réellement. Jusqu’à ce que la méthode read() soit appelée, le fichier n’est pas modifié et le traitement du texte n’est pas démarré. L’objet texte est simplement une composition de décorateurs, pas une procédure exécutable. Consultez cet article sur les styles de programmation déclaratifs et impératifs : Utility Classes Have Nothing to Do With Functional Programming.</p><p>Ce design est beaucoup plus flexible et réutilisable qu’un design plus traditionnel, où l’objet Text est suffisamment intelligent pour effectuer toutes les opérations mentionnées. Par exemple, la classe String de Java est un bon exemple d’un mauvais design. Elle possède plus de 20 méthodes utilitaires qui auraient dû être fournies sous forme de décorateurs : trim(), toUpperCase(), substring(), split(), et bien d’autres, par exemple. Lorsque je veux élaguer ma chaîne de caractères, la mettre en majuscules, puis la diviser en morceaux, voici à quoi ressemblera mon code :</p><p>java final String txt = “hello, world!”; final String[] parts = txt.trim().toUpperCase().split(“ “);</p><p>C’est de la programmation impérative et procédurale. En revanche, des décorateurs composables rendraient ce code orienté objet et déclaratif. Ce serait génial d’avoir quelque chose comme ça en Java à la place (pseudo-code) :</p><p>java final String[] parts = new String.Split( new String.UpperCased( new String.Trimmed(“hello, world!”) ) );</p><p>Translation:</p><p>java final String[] parts = new String.Split( new String.UpperCased( new String.Trimmed(“hello, world!”) ) );</p><p>Pour conclure, je vous recommande de réfléchir à deux fois chaque fois que vous ajoutez une nouvelle méthode utilitaire à l’interface/classe. Essayez d’éviter autant que possible les méthodes utilitaires et utilisez plutôt des décorateurs. Une interface idéale devrait contenir uniquement des méthodes que vous ne pouvez absolument pas supprimer. Tout le reste devrait être fait grâce à des décorateurs composables.</p><p class="jekyll-chatgpt-translate">Translated by ChatGPT gpt-3.5-turbo/0.0.14</p></article></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2023</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="https://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge" /></a> &nbsp; <a href="https://github.com/yegor256/blog/stargazers"> <img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square" alt="GitHub stars" /></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?3a3b5d6c83f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>
