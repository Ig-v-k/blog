<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Utility classes, even though they look like collections of functions, have nothing to do with functional programming, mostly because they are bags of procedures" /> <meta name="keywords" content="" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Utility Classes Have Nothing to Do With Functional Programming"/> <meta name="twitter:description" property="og:description" content="Utility classes, even though they look like collections of functions, have nothing to do with functional programming, mostly because they are bags of procedures"/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/chinese/2015/02/20/utility-classes-vs-functional-programming.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?987b3885bf7"/> <link rel="apple-touch-icon" href="/favicon.ico?987b3885bf7"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?987b3885bf7"/> <link rel="stylesheet" href="/css/icons.css?987b3885bf7"/> <link rel="canonical" href="https://www.yegor256.com/chinese/2015/02/20/utility-classes-vs-functional-programming.html" /> <title>Utility Classes Have Nothing to Do With Functional Programming</title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;385</a></li> <li ><a href="/teaching.html" title="My courses and lectures">Teaching</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Art</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке о политике в России, Украине и мире">Политика</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><h1 itemprop="name headline mainEntityOfPage">Utility Classes Have Nothing to Do With Functional Programming</h1></header> <article class="main" itemprop="articleBody" style="font-family: sans-serif; font-size: 0.9em; line-height: 1.2em;"><p style="color: #C42C00;">The following text is a translation of the <a href='https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html'>original English article</a>, performed by <a href="https://chat.openai.com/">ChatGPT</a> (gpt-3.5-turbo) and <a href="https://github.com/yegor256/jekyll-chatgpt-translate">this Jekyll plugin</a>:</p><p>最近有人指责我反对函数式编程，因为我称实用类为反模式。这完全是错误的！嗯，我确实认为它们是糟糕的反模式，但与函数式编程无关。我相信有两个基本原因。首先，函数式编程是声明式的，而实用类方法是命令式的。其次，函数式编程基于λ演算，其中函数可以赋值给变量。实用类方法在这个意义上不是函数。我马上会解释这些陈述。</p><p>在Java中，基本上有兩種有效的選擇，可以替代Guava、Apache Commons和其他推廣的那些醜陋的實用類別。第一個選擇是使用傳統類別，第二個選擇是使用Java 8的lambda。現在，讓我們看看為什麼實用類別根本無法接近函數式編程，以及這種誤解從何而來。</p><p>这是Java 1.0中一个典型的实用类Math的例子:</p><p>Java公共类Math { public static double abs(double a); //几十个相同风格的其他方法 }</p><p>当您想要计算浮点数的绝对值时，可以按照以下方式使用它：</p><p>java double x = Math.abs(3.1415926d);</p><p>Java双精度变量x = Math.abs(3.1415926d);</p><p>这是怎么回事？我们需要一个函数，我们从Math类中获取它。这个类里面有许多有用的函数，可以用于许多典型的数学运算，比如计算最大值、最小值、正弦、余弦等等。这是一个非常受欢迎的概念；只要看看任何商业或开源产品就知道了。自从Java被发明以来，这些实用类就被广泛使用（这个Math类是在Java的第一个版本中引入的）。嗯，从技术上讲没有什么问题。代码可以正常工作。但它不是面向对象编程。相反，它是命令式和过程式的。我们在意吗？这取决于你自己的决定。让我们看看有什么区别。</p><p>基本上有两种不同的方法：声明性和命令性。</p><p>命令式编程着重描述程序如何通过改变程序状态来运作。我们刚刚看到了一个命令式编程的例子。这是另一个例子（这是纯粹的命令式/过程式编程，与面向对象编程无关）。</p><p>java公共类MyMath { public double f(double a, double b) { double max = Math.max(a, b); double x = Math.abs(max); return x; } }</p><p>声明式编程关注程序应该实现什么，而不是按照要采取的操作序列来指定如何完成。以下是同样的代码在Lisp中的表现形式，Lisp是一种函数式编程语言：</p><p>lisp（defun f（a b）（abs（max a b）））</p><p>有什么陷阱吗？只是语法上的差异吗？并不完全是。</p><p>有许多关于命令式和声明式风格之间差异的定义，但我将尝试给出自己的定义。在这个 f 函数/方法的场景中，基本上有三个角色相互作用：一个购买者、一个结果的打包者和一个结果的消费者。假设我这样调用这个函数：</p><p>java public void foo() { double x = this.calc(5, -7); System.out.println(“max+abs equals to “ + x); } private double calc(double a, double b) { double x = Math.f(a, b); return x; }</p><p>public void foo() { double x = this.calc(5, -7); System.out.println(“最大值加绝对值等于 “ + x); } private double calc(double a, double b) { double x = Math.f(a, b); return x; }</p><p>在这里，方法calc()是一个买家，方法Math.f()是结果的打包者，而方法foo()是一个消费者。无论使用哪种编程风格，这三个角色始终参与其中：买家、打包者和消费者。</p><table> <tbody> <tr><td>想象一下，你是一个买家，想要为你的（女朋友</td><td>男朋友）购买一份礼物。第一种选择是去商店购买，支付50美元，让他们为你包装香水，然后将其送给朋友（并获得一个回报的吻）。这是一种命令式风格。</td></tr> </tbody> </table><p>第二个选项是去商店，支付50美元，并获得一张礼品卡。然后您将这张卡递给朋友（并得到一个回吻）。当他或她决定将其兑换成香水时，他或她将去商店领取。这是一种陈述式风格。</p><p>See the difference?</p><p>在第一种情况下，你强迫包装商（一家美容店）找到那种香水并将其包装好，然后将其呈现给你作为一个可直接使用的产品。而在第二种情况下，你只是从店铺得到一个承诺，即在必要时，店员将会找到那种香水，并将其包装好提供给那些需要的人。如果你的朋友从不使用那张礼品卡去光顾这家店铺，那种香水将会一直留存在库存中。</p><p>此外，您的朋友可以将那张礼品卡作为一个产品本身，而无需去商店。他或她可以选择将其作为礼物赠送给他人，或者仅仅将其换成另一张卡片或产品。这张礼品卡本身就成为了一个产品！</p><p>所以区别在于消费者所获得的东西——要么是一个已经可以使用的产品（命令式），要么是一个可以随后兑换成实际产品的凭证（陈述式）。</p><p>实用类，如JDK中的Math或Apache Commons中的StringUtils，会返回立即可用的产品，而Lisp和其他函数式语言中的函数则会返回“凭证”。例如，如果在Lisp中调用max函数，只有当你真正开始使用它时，两个数字之间的实际最大值才会计算出来。</p><p>lisp (let (x (max 1 5)) (print “X equals to “ x))</p><p>直到这个打印开始向屏幕输出字符，函数max才会被调用。这个x是当你尝试“购买”1和5之间的最大值时返回给你的“凭证”。</p><p>请注意，将Java静态函数嵌套到另一个函数中并不能使其变为声明式。代码仍然是命令式的，因为其执行立即产生结果。</p><p>请将以下英文段落翻译成中文，不要更改专有名词：</p><p>java public class MyMath { public double f(double a, double b) { return Math.abs(Math.max(a, b)); } }</p><p>“Okay,” you may say, “I got it, but why is declarative style better than imperative? What’s the big deal?” I’m getting to it. Let me first show the difference between functions in functional programming and static methods in OOP. As mentioned above, this is the second big difference between utility classes and functional programming.</p><p>在任何函数式编程语言中，你都可以这样做：</p><p>lisp (defun foo (x) (x 5))</p><p>然后，之后，你可以称之为x。</p><p>lisp (defun bar (x) (+ x 1)) // 定义函数 bar (print (foo bar)) // 将 bar 作为参数传递给 foo</p><p>在函数式编程术语中，Java中的静态方法不是函数。你不能像这样使用静态方法。你不能将静态方法作为参数传递给另一个方法。基本上，静态方法是过程或者简单地说，是以唯一名称分组的Java语句。访问它们的唯一方式是调用过程并传递所有必要的参数。该过程将计算一些内容并返回一个立即可用的结果。</p><p>现在我们来到了最后一个问题，我能听到你在问：“好吧，实用类并不是函数式编程，但它们看起来像函数式编程，运行非常快，而且使用起来非常容易。为什么不使用它们呢？为什么要追求完美，当Java的二十年历史证明实用类是每个Java开发者的主要工具？”</p><p>除了我经常被指责为面向对象编程（OOP）的原教旨主义者之外，还有几个非常实际的原因（顺便说一下，我是一个面向对象编程的原教旨主义者）：</p><p>可测试性。对于实用类中的静态方法的调用是硬编码的依赖，无法为测试目的而打破。如果您的类调用了FileUtils.readFile()，我将无法在不使用真实磁盘文件的情况下对其进行测试。</p><p>效率。由于命令式本质，实用类比起声明式替代方案要低效得多。它们在此刻直接进行所有计算，即使还不必要，也会占用处理器资源。StringUtils.split()并非返回一个将字符串分解为块的承诺，而是立即进行分解。并且它会将其分解为所有可能的块，即使只有第一个块是“买家”所需的。</p><p>可读性。实用类往往非常庞大（尝试阅读Apache Commons中StringUtils或FileUtils的源代码）。在实用类中，完全缺乏面向关注点的分离的整体思想，这就是面向对象编程如此美妙之处。它们只是把所有可能的过程放入一个巨大的.java文件中，当超过十几个静态方法时，变得非常难以维护。</p><p>总之，让我再强调一下：实用类与函数式编程毫无关系。它们只是一堆静态方法的容器，是命令式过程。尽量远离它们，而是使用坚实、内聚的对象，无论您需要声明多少个对象，无论它们有多小。</p><p class="jekyll-chatgpt-translate">Translated by ChatGPT gpt-3.5-turbo/0.0.16 on 22/08/2023 15:26</p></article></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2023</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="https://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge" /></a> &nbsp; <a href="https://github.com/yegor256/blog/stargazers"> <img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square" alt="GitHub stars" /></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?987b3885bf7"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>
